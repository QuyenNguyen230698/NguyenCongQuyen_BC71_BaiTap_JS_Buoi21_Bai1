<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh Sách Nhân Viên</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .list {
            margin-top: 20px;
        }
        .employee-category {
            margin-bottom: 20px;
        }
        .form-control {
            margin-right: 10px;
        }
        .input-group-prepend {
            display: inline;
        }
    </style>
</head>
<body>
    <div class="input-group">
        <input type="text" class="form-control" placeholder="Loại nhân viên" id="searchName">
        <div class="input-group-prepend">
            <span class="input-group-text" id="btnTimNV"><i class="fa fa-search"></i></span>
        </div>
    </div>
    <div id="employeeList" class="list"></div>

    <script>
        // Định nghĩa hàm khungModal
        function khungModal(tknv, name, email, password, datepicker, luongCB, chucVu, gioLam) {
            this.tknv = tknv;
            this.name = name;
            this.email = email;
            this.password = password;
            this.datepicker = datepicker;
            this.luongCB = luongCB;
            this.chucVu = chucVu;
            this.gioLam = gioLam;
            this.salary = function() {
                if (this.chucVu === "Giám đốc") {
                    return this.luongCB * 3;
                } else if (this.chucVu === "Trưởng phòng") {
                    return this.luongCB * 2;
                } else {
                    return this.luongCB * 1;
                }
            };
            this.xepLoaiNV = function() {
                if (this.gioLam >= 192) {
                    return "Xuất sắc";
                } else if (this.gioLam >= 176) {
                    return "Giỏi";
                } else if (this.gioLam >= 160) {
                    return "Khá";
                } else {
                    return "Trung bình";
                }
            };    
        }

        // Tạo danh sách nhân viên
        var employees = [
            new khungModal('001', 'Nguyễn Văn A', 'a@example.com', 'password123', '2024-01-01', 8000000, 'Giám đốc', 200),
            new khungModal('002', 'Trần Thị B', 'b@example.com', 'password456', '2024-02-01', 7000000, 'Trưởng phòng', 180),
            new khungModal('003', 'Lê Văn C', 'c@example.com', 'password789', '2024-03-01', 6000000, 'Nhân viên', 170),
            new khungModal('004', 'Phạm Thị D', 'd@example.com', 'password000', '2024-04-01', 5000000, 'Nhân viên', 150)
        ];

        // Hàm để hiển thị nhân viên theo loại xếp hạng
        function displayEmployees(category) {
            var employeeList = document.getElementById('employeeList');
            employeeList.innerHTML = ''; // Xóa nội dung cũ

            var filteredEmployees = employees.filter(function(employee) {
                return employee.xepLoaiNV() === category;
            });
            
            var categoryDiv = document.createElement('div');
            categoryDiv.className = 'employee-category';
            categoryDiv.innerHTML = '<h3>' + category + '</h3>';
            
            if (filteredEmployees.length > 0) {
                var list = document.createElement('ul');
                filteredEmployees.forEach(function(employee) {
                    var listItem = document.createElement('li');
                    listItem.textContent = employee.name + ' (' + employee.tknv + ') - Lương: ' + employee.salary();
                    list.appendChild(listItem);
                });
                categoryDiv.appendChild(list);
            } else {
                categoryDiv.innerHTML += '<p>Không có nhân viên nào.</p>';
            }
            
            employeeList.appendChild(categoryDiv);
        }

        // Hàm xử lý sự kiện tìm kiếm
        function searchEmployees() {
            var searchName = document.getElementById('searchName').value.trim();
            displayEmployees(searchName);
        }

        // Lắng nghe sự kiện nhấn nút tìm kiếm
        document.getElementById('btnTimNV').addEventListener('click', function() {
            searchEmployees();
        });
    </script>
</body>
</html>
